> 【功能权限】：能做什么事，简单点说就是控制增删改查
> 
> 【数据权限】：就是在查的基础上控制所能看到数据

本系统是基于部门做的一个简单数据权限控制，就是控制用户能看哪些部门的数据。 目前系统在用户管理、部门管理、岗位管理中加入了数据权限供大家测试

#### 如何使用

##### 1、设置角色的数据权限

系统提供了三种数据权限控制

+ 全部数据权限 无数据权限限制
+ 本级数据权限 限制只能看到本部门数据
+ 自定义数据权限 可根据实际需要选择部门控制数据权限

![设置角色的数据权限](https://docs.auauz.net/_image/2019-04-11-09-43-11.jpg)

##### 2、修改后端代码

这里用岗位管理来举例，首先岗位的实体中需要管理部门，这里用的是一对一关联

```
 @OneToOne
    @JoinColumn(name = "dept_id")
    private Dept dept;
```

**（1）在控制器中注入**
![在控制器中注入](https://docs.auauz.net/_image/2019-04-11-09-52-34.jpg)

**（2）在查询的方法中加入如下代码获取数据权限**
![在查询的方法中加入如下代码获取数据权限](https://docs.auauz.net/_image/2019-04-11-09-47-44.jpg)

**（3）修改QueryService**
![修改QueryService ](https://docs.auauz.net/_image/2019-04-11-09-49-26.jpg)